<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8"/>
<title>JCH</title>
<script type="text/javascript" src="//code.jquery.com/jquery-2.2.4.min.js"></script>
<meta name="viewport" content="width=device-width,initial-scale=1"/>

<link rel="shortcut icon" href="./icon.png" type="image/png"/>
<link rel="icon" href="./icon.png" type="image/png"/>
<link rel="apple-touch-icon" href="./icon.png"/>

<meta name="viewport" content="width=device-width,initial-scale=1"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
<meta name="apple-mobile-web-app-title" content="JCH previewer"/>

<style type="text/css">
html, body{
  background-color: #fafafa;
  font-size: 10px;
  color: #333;
}
textarea{
  font-size: 10px;
}
th{
  width: 25%;
}
td{
  padding: 20px;
  text-align: left;
  vertical-align: top;
}
.mytexts{
  width: 90%;
  height: 400px;
}
</style>
<script>
$(function(){
  if( location.search && location.search.length > 1 ){
    var t = location.search.substr( 1 );
    if( t ){
      var filename = "";
      var t = t.split( '&' );
      t.forEach( function( tmp ){
        var param = tmp.split( '=' );
        if( param.length == 2 && param[0] == 'file' ){
          filename = param[1];
        }
      });

      if( filename ){
        $.ajax({
          type: 'GET',
          url: './' + filename,
          success: function( body ){
            //console.log( 'body', body );
            if( body.html ){
              $('#htmltext').val( body.html );
            }
            if( body.css ){
              $('#csstext').val( body.css );
            }
            if( body.javascript ){
              $('#jstext').val( body.javascript );
            }
            HTML();
          },
          error: function( e0, e1, e2 ){
            console.log( e0, e1, e2 );
          }
        });
      }
    }
  }
});

function HTML(){
  var htmltext = $('#htmltext').val();
  $('#_html').html( htmltext );

  var csstext = $('#csstext').val();
  if( csstext ){
   $('#mystyle').text( csstext );
  }

  var jstext = $('#jstext').val();
  if( jstext ){
    eval( jstext );
  }
}
</script>
<style type="text/css" id="mystyle"></style>
</head>
<body>

<div class="container_">

<table width="100%" border="1">
<tr>
<th>
<input type="button" value="JavaScript" onClick="HTML();"/>
</th>
<th>
<input type="button" value="CSS" onClick="HTML();"/>
</th>
<th>
<input type="button" value="HTML" onClick="HTML();"/>
</th>
<th>Preview</th>
</tr>
<tr>
<td>
&lt;script src="jquery.js"&gt;&lt;/script&gt;<br/>
&lt;script&gt;<br/>
$(function(){<br/>
<textarea id="jstext" class="mytexts">
</textarea><br/>
});<br/>
&lt;/script&gt;<br/>
</td>
<td>
&lt;style&gt;<br/>
<textarea id="csstext" class="mytexts">
</textarea><br/>
&lt;/style&gt;<br/>
</td>
<td>
<textarea id="htmltext" class="mytexts">
&lt;h2&gt; 50音 &lt;/h2&gt;
&lt;div id="xxx"&gt;
&lt;ul&gt;
&lt;li id="li1" class="li"&gt;あいうえお&lt;/li&gt;
&lt;li id="li2" class="li"&gt;かきくけこ&lt;/li&gt;
&lt;li id="li3" class="li"&gt;さしすせそ&lt;/li&gt;
&lt;li id="li4" class="li"&gt;たちつてと&lt;/li&gt;
&lt;li id="li5" class="li"&gt;なにぬねの&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</textarea>
</td>
<td id="_html" class="mytexts">
<h2> 50音 </h2>
<div id="xxx">
<ul>
<li id="li1" class="li">あいうえお</li>
<li id="li2" class="li">かきくけこ</li>
<li id="li3" class="li">さしすせそ</li>
<li id="li4" class="li">たちつてと</li>
<li id="li5" class="li">なにぬねの</li>
</ul>
</div>
</td></tr>
</table>

</div>

</body>
</html>
